<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Anthos,Service Account,Kubernetes," />










<meta name="description" content="å‰è¨€Anthos æ˜¯ç‚ºæ··åˆå¼é›²ç«¯å’Œå¤šé›²ç«¯ç’°å¢ƒæä¾›ä¸€è‡´çš„é–‹ç™¼å’Œä½œæ¥­é«”é©—ï¼Œæ•…éœ€è¦é«”ç¾å¼·å¤§çš„åŒ…å®¹æ€§ï¼Œå°‡å¤šå€‹GKEã€äº¦æˆ–æ˜¯å…¶å®ƒé›²çš„Kubernetesä¸€ä½µæ•´åˆé€²å–®ä¸€å¹³å° eg. å¦‚ä¸‹åœ–æ‰€ç¤ºã€‚æœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥é ˜è½æ­¤Google æ··åˆé›²çš„CloudOnboardæ´»å‹•[5]ï¼Œæœ‰ç´°èªªå®Œæ•´AnthosåŠŸèƒ½ ã€‚å› æ­¤æœ¬å¯¦é©—å°‡å¸¶ä¾†æ¨¡æ“¬å¤–éƒ¨Kubernetesï¼Œé€éGKE-Hubèˆ‡GKE-Connectï¼ŒæŠŠåŸæœ¬èˆ‡GCPæ²’é—œ">
<meta name="keywords" content="Anthos,Service Account,Kubernetes">
<meta property="og:type" content="article">
<meta property="og:title" content="[Anthos] çµ±ä¸€å¤©ä¸‹ï¼šå¯¦ç¾å¤–éƒ¨ Kubernetes è¨»å†Šè‡³ Anthos">
<meta property="og:url" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;index.html">
<meta property="og:site_name" content="é»ƒå¤§ä»™çš„é›²ç«¯ä¿®è¡Œå®¤">
<meta property="og:description" content="å‰è¨€Anthos æ˜¯ç‚ºæ··åˆå¼é›²ç«¯å’Œå¤šé›²ç«¯ç’°å¢ƒæä¾›ä¸€è‡´çš„é–‹ç™¼å’Œä½œæ¥­é«”é©—ï¼Œæ•…éœ€è¦é«”ç¾å¼·å¤§çš„åŒ…å®¹æ€§ï¼Œå°‡å¤šå€‹GKEã€äº¦æˆ–æ˜¯å…¶å®ƒé›²çš„Kubernetesä¸€ä½µæ•´åˆé€²å–®ä¸€å¹³å° eg. å¦‚ä¸‹åœ–æ‰€ç¤ºã€‚æœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥é ˜è½æ­¤Google æ··åˆé›²çš„CloudOnboardæ´»å‹•[5]ï¼Œæœ‰ç´°èªªå®Œæ•´AnthosåŠŸèƒ½ ã€‚å› æ­¤æœ¬å¯¦é©—å°‡å¸¶ä¾†æ¨¡æ“¬å¤–éƒ¨Kubernetesï¼Œé€éGKE-Hubèˆ‡GKE-Connectï¼ŒæŠŠåŸæœ¬èˆ‡GCPæ²’é—œ">
<meta property="og:locale" content="en">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled1.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled2.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled3.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled4.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled5.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled6.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled7.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled8.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled9.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled10.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled11.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled12.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled13.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled14.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled15.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled16.png">
<meta property="og:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled17.png">
<meta property="og:updated_time" content="2021-06-06T09:54:09.872Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https:&#x2F;&#x2F;joehuang-pop.github.io&#x2F;archives&#x2F;2021&#x2F;05&#x2F;06&#x2F;Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos&#x2F;Untitled.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://joehuang-pop.github.io/archives/2021/05/06/Anthos-çµ±ä¸€å¤©ä¸‹ï¼šå¯¦ç¾å¤–éƒ¨-Kubernetes-è¨»å†Šè‡³-Anthos/"/>





  <title>[Anthos] çµ±ä¸€å¤©ä¸‹ï¼šå¯¦ç¾å¤–éƒ¨ Kubernetes è¨»å†Šè‡³ Anthos | é»ƒå¤§ä»™çš„é›²ç«¯ä¿®è¡Œå®¤</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">é»ƒå¤§ä»™çš„é›²ç«¯ä¿®è¡Œå®¤</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Where you Spent time where the Success Is | æ™‚é–“èŠ±åœ¨é‚£è£¡ï¼Œæˆå°±å°±åœ¨é‚£è£¡</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-schedule">
          <a href="/schedule/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-calendar"></i> <br />
            
            Schedule
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://joehuang-pop.github.io/archives/2021/05/06/Anthos-%E7%B5%B1%E4%B8%80%E5%A4%A9%E4%B8%8B%EF%BC%9A%E5%AF%A6%E7%8F%BE%E5%A4%96%E9%83%A8-Kubernetes-%E8%A8%BB%E5%86%8A%E8%87%B3-Anthos/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Joe Huang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="é»ƒå¤§ä»™çš„é›²ç«¯ä¿®è¡Œå®¤">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">[Anthos] çµ±ä¸€å¤©ä¸‹ï¼šå¯¦ç¾å¤–éƒ¨ Kubernetes è¨»å†Šè‡³ Anthos</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2021-05-06T16:51:14+08:00">
                2021-05-06
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GCP/" itemprop="url" rel="index">
                    <span itemprop="name">GCP</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv"><i class="fa fa-file-o"></i>
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>Anthos æ˜¯ç‚ºæ··åˆå¼é›²ç«¯å’Œå¤šé›²ç«¯ç’°å¢ƒæä¾›ä¸€è‡´çš„é–‹ç™¼å’Œä½œæ¥­é«”é©—ï¼Œæ•…éœ€è¦é«”ç¾å¼·å¤§çš„åŒ…å®¹æ€§ï¼Œå°‡å¤šå€‹GKEã€äº¦æˆ–æ˜¯å…¶å®ƒé›²çš„Kubernetesä¸€ä½µæ•´åˆé€²å–®ä¸€å¹³å° eg. å¦‚ä¸‹åœ–æ‰€ç¤ºã€‚æœ‰èˆˆè¶£çš„æœ‹å‹å¯ä»¥é ˜è½æ­¤Google æ··åˆé›²çš„CloudOnboardæ´»å‹•<a href="https://cloudonair.withgoogle.com/events/taiwan-cloud-onboard-architecturemodernization-2021/watch?talk=d2-session1" target="_blank" rel="noopener">[5]</a>ï¼Œæœ‰ç´°èªªå®Œæ•´AnthosåŠŸèƒ½ ã€‚å› æ­¤æœ¬å¯¦é©—å°‡å¸¶ä¾†æ¨¡æ“¬å¤–éƒ¨Kubernetesï¼Œé€éGKE-Hubèˆ‡GKE-Connectï¼ŒæŠŠåŸæœ¬èˆ‡GCPæ²’é—œç³»çš„K8sçµ±åˆç‚ºä¸€ã€‚</p>
<p><img src="Untitled.png" alt="Untitled.png"></p>
<h1 id="æ­¥é©Ÿï¼š"><a href="#æ­¥é©Ÿï¼š" class="headerlink" title="æ­¥é©Ÿï¼š"></a>æ­¥é©Ÿï¼š</h1><ul>
<li>æº–å‚™å¤–éƒ¨Kubernetes</li>
<li>é‡å° GCP, Kubernetes å„åˆ¥ç”Ÿæˆ Service Account</li>
<li>Kubernetesèˆ‡Anthosæ•´åˆ</li>
</ul>
<h1 id="â–Œ1-æº–å‚™ä¸€å¥—Kubernetes-kind"><a href="#â–Œ1-æº–å‚™ä¸€å¥—Kubernetes-kind" class="headerlink" title="â–Œ1. æº–å‚™ä¸€å¥—Kubernetes: kind"></a>â–Œ1. æº–å‚™ä¸€å¥—Kubernetes: kind</h1><ul>
<li>æœ¬æ¬¡ä½¿ç”¨çš„K8s cluteræ¡ç”¨kind[1] æŠ€è¡“</li>
<li>kind é€éé‹è¡Œå¤šå€‹container æ§‹æˆcontrol planeä»¥åŠworkersï¼Œä½†å®ƒå€‘å¯¦éš›ä¸Šéƒ½æ˜¯container åœ¨é‹è¡Œ</li>
</ul>
<h3 id="å‰ç½®éœ€æ±‚"><a href="#å‰ç½®éœ€æ±‚" class="headerlink" title="å‰ç½®éœ€æ±‚"></a>å‰ç½®éœ€æ±‚</h3><p>åœ¨éƒ¨ç½²kindä¹‹å‰ï¼Œéœ€è¦å®‰è£å¥½docker runtime, kubectlï¼Œä»¥åŠGoogle sdkä»¥åˆ©å–å¾—service accountï¼Œèˆ‡è¨»å†Šç­‰éœ€æ±‚</p>
<ul>
<li>docker runtime for Centos7</li>
<li>kubectl[2]</li>
<li>gcloud command sdk[3]: <code>$gcloud auth login</code>, <code>$gcloud init</code></li>
</ul>
<h3 id="step1-Google-OAuth-for-gcloud-auth-login"><a href="#step1-Google-OAuth-for-gcloud-auth-login" class="headerlink" title="step1. Google OAuth for gcloud auth login"></a>step1. <strong>Google OAuth for gcloud auth login</strong></h3><p>æ‰“é€š Google OAuthï¼Œç›´æ¥ä½¿ç”¨vm shellå®Œæˆæœ¬æ¬¡é©—é©—</p>
<ul>
<li>åŸ·è¡Œ<code>gcloud auth login</code>ä¹‹å¾Œï¼Œç³»çµ±æœƒå•Ÿç”¨browseré€²è¡ŒOAuthèªè­‰ï¼Œéœ€é»é¸ç”¢ç”Ÿå‡ºä¾†çš„è™›æ“¬ç¶²é </li>
<li>å†é¸æ“‡è¦ç™»å…¥çš„accountï¼Œéš¨å¾Œæœƒç”¢ç”Ÿä¸€çµ„<code>Verification code</code></li>
<li>æœ€å¾Œè«‹å°‡é€™çµ„codeå›å¡«è‡³ä½ çš„shellå®Œæˆgcloud auth loginæˆæ¬Š</li>
</ul>
<p><img src="Untitled1.png" alt="Untitled1.png"></p>
<h3 id="step2-CentOS-install-kind"><a href="#step2-CentOS-install-kind" class="headerlink" title="step2. CentOS install kind"></a>step2. CentOS install kind</h3><ul>
<li>ä¸‹è¼‰kind packageï¼Œæˆæ–¼åŸ·è¡Œæ¬Š</li>
<li>ä¸¦å°‡ç›®éŒ„ç§»å‹•è‡³ /usr/bin/kindï¼Œä»¥åˆ©å¾ŒçºŒåŸ·è¡Œkindæ™‚å¯ä»¥ç›´æ¥åœ¨shellä¸Šä½¿ç”¨</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#1 install kind</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">curl -Lo ./kind "https://kind.sigs.k8s.io/dl/v0.9.0/kind-$(uname)-amd64"</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">chmod +x ./kind</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">sudo mv ./kind /usr/bin/kind</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#2 test kind</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">kind</span></pre></td></tr></table></figure>

<p><img src="Untitled2.png" alt="Untitled2.png"></p>
<h3 id="step3-æº–å‚™clusterè¨­å®šæª”-kind-yaml"><a href="#step3-æº–å‚™clusterè¨­å®šæª”-kind-yaml" class="headerlink" title="step3. æº–å‚™clusterè¨­å®šæª”: kind.yaml"></a>step3. æº–å‚™clusterè¨­å®šæª”: kind.yaml</h3><ul>
<li>kind.yaml æ­¤è¨­å®šæª”ï¼Œæ˜¯è¦å®šç¾©æœ‰å¤šå°‘å€‹control-planeï¼Œèˆ‡å¤šå°‘å€‹worker node</li>
<li>ä»¥åŠkubernetes API serverä½¿ç”¨çš„API ç‰ˆæœ¬</li>
</ul>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#1 edit yaml file</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="string">vi</span> <span class="string">kind.yaml</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#2</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="attr">kind:</span> <span class="string">Cluster</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"><span class="attr">apiVersion:</span> <span class="string">kind.x-k8s.io/v1alpha4</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="attr">nodes:</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">role:</span> <span class="string">control-plane</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">role:</span> <span class="string">worker</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">role:</span> <span class="string">worker</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="bullet">-</span> <span class="attr">role:</span> <span class="string">worker</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#3 create cluster by kind</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line"><span class="string">kind</span> <span class="string">create</span> <span class="string">cluster</span> <span class="string">--config</span> <span class="string">kind.yaml</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#4 build up context for k8s</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"><span class="string">kubectl</span> <span class="string">cluster-info</span> <span class="string">--context</span> <span class="string">kind-kind</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#5</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line"><span class="string">sudo</span> <span class="string">kind</span> <span class="string">get</span> <span class="string">clusters</span></span></pre></td></tr></table></figure>

<p>å®‰è£éç¨‹éœ€7~8åˆ†é˜</p>
<p><img src="Untitled3.png" alt="Untitled3.png"></p>
<p>Verify kind(K8s)</p>
<p><img src="Untitled4.png" alt="Untitled4.png"></p>
<h3 id="step3-é©—è­‰K8s"><a href="#step3-é©—è­‰K8s" class="headerlink" title="step3. é©—è­‰K8s"></a>step3. é©—è­‰K8s</h3><p>é€éä»¥ä¸‹æŒ‡ä»¤ï¼Œé‘‘åˆ¥K8sæ˜¯å¦é‹è¡Œæ­£å¸¸</p>
<ul>
<li>å¾å…§éƒ¨K8s control: kubectl cluster-info, kubectl get nodes</li>
<li>å¾å¤–éƒ¨container: docker ps</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#1 cluster-info shows control-plane status</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">kubectl cluster-info</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#2 worker nodes</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">kubectl get nodes</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#3 shows currenly running dokcer for kind cluster</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">docker ps</span></pre></td></tr></table></figure>

<p>åŸ·è¡Œ$kubectl cluster-info,  $kubectl get nodes</p>
<ul>
<li>å¾—åˆ°ç›®å‰é‹è¡Œçš„kubernetes control plane(master node)</li>
</ul>
<p><img src="Untitled5.png" alt="Untitled5.png"></p>
<p>åŸ·è¡Œ$docker psï¼Œçœ‹åˆ°4å€‹container é‹è¡Œ</p>
<ul>
<li>master node x1</li>
<li>worker node x3</li>
</ul>
<p><img src="Untitled6.png" alt="Untitled6.png"></p>
<h1 id="â–Œ2-é‡å°-GCP-Kubernetes-å„åˆ¥ç”Ÿæˆ-Service-Account"><a href="#â–Œ2-é‡å°-GCP-Kubernetes-å„åˆ¥ç”Ÿæˆ-Service-Account" class="headerlink" title="â–Œ2. é‡å° GCP, Kubernetes å„åˆ¥ç”Ÿæˆ Service Account"></a>â–Œ2. é‡å° GCP, Kubernetes å„åˆ¥ç”Ÿæˆ Service Account</h1><p>ä¸Šè¿°çš„éç¨‹å®Œæˆå¾Œï¼Œæ˜¯ç‚ºäº†K8så¹³å°çš„æº–å‚™ã€‚æ¥ä¸‹æ˜¯è®“Anthosä¸²æ¥åˆ°å³æœ‰çš„K8sï¼ŒäºŒé‚Šä¸åŒç’°å¢ƒä¸Šçš„æ§åˆ¶æ¬Šæ•´åˆï¼Œæˆ‘å€‘å°±éœ€è¦é€éservice accountä¾†é”æˆã€‚è€ŒKeyåˆ†åˆ¥ç‚ºGoogle keyå’ŒKubernetesï¼Œæˆ‘å€‘å§‘ä¸”ç¨±ç‚º<code>GSA</code>, <code>KSA</code>å§</p>
<h3 id="step1-é‡å°gke-connect-å•Ÿç”¨ä¸€æŠŠservice-account-SA"><a href="#step1-é‡å°gke-connect-å•Ÿç”¨ä¸€æŠŠservice-account-SA" class="headerlink" title="step1. é‡å°gke-connect å•Ÿç”¨ä¸€æŠŠservice account (SA)"></a>step1. é‡å°gke-connect å•Ÿç”¨ä¸€æŠŠservice account (SA)</h3><ul>
<li>é€™é‚Šå–SAçš„ç›®çš„æ˜¯ç‚ºè¦èƒ½æ§åˆ¶GCPä¸Šé¢çš„æœå‹™</li>
<li>æ­¤æ­¥é©Ÿçš„service accountï¼Œæ˜¯åœ¨GCP é‹è¡Œçš„ï¼Œå› æ­¤ç°¡ç¨±ç‚ºGSA</li>
<li>é€™æŠŠGSAï¼Œè¦ç¶çš„è§’è‰²æ˜¯<code>roles/gkehub.connect</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#1 Prepare SA for gke-connect</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">SA=gke-connect</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">GOOGLE_CLOUD_PROJECT=$(gcloud config get-value core/project 2&gt;/dev/null)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">gcloud iam service-accounts create <span class="variable">$&#123;SA&#125;</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#2 binding ROLE to specific account</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">gcloud projects add-iam-policy-binding <span class="variable">$&#123;GOOGLE_CLOUD_PROJECT&#125;</span> \</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"> --member=<span class="string">"serviceAccount:<span class="variable">$&#123;SA&#125;</span>@<span class="variable">$&#123;GOOGLE_CLOUD_PROJECT&#125;</span>.iam.gserviceaccount.com"</span> \</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"> --role=<span class="string">"roles/gkehub.connect"</span></span></pre></td></tr></table></figure>

<p>ç¢ºèª#1, #2æ­¥é©Ÿçµæœç”¢ç”Ÿåç‚ºgke-connectå¸³æˆ¶</p>
<ul>
<li><a href="mailto:gke-connect@anthos-onboard-demo.iam.gserviceaccount.com" target="_blank" rel="noopener">gke-connect@anthos-onboard-demo.iam.gserviceaccount.com</a></li>
</ul>
<p><img src="Untitled7.png" alt="Untitled7.png"></p>
<h3 id="step2-æŠŠGSA-ä¸‹è¼‰è‡³æœ¬æ©Ÿç‚º-json"><a href="#step2-æŠŠGSA-ä¸‹è¼‰è‡³æœ¬æ©Ÿç‚º-json" class="headerlink" title="step2. æŠŠGSA ä¸‹è¼‰è‡³æœ¬æ©Ÿç‚º.json"></a>step2. æŠŠGSA ä¸‹è¼‰è‡³æœ¬æ©Ÿç‚º.json</h3><ul>
<li>é€™æŠŠkeyç”¨æ„ï¼Œæ˜¯ç‚ºäº†å¯ä»¥å‘¼å«Anthos gke-connect APIï¼Œé‹è¡Œå¾Œä½¿å…¶å¯ä»¥åœ¨K8s å®‰è£<code>gke-connent agnetï¼Œæœ‰äº†</code></li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#1 æŠŠGSA ä¸‹è¼‰è‡³æœ¬æ©Ÿç‚º.json</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">gcloud iam service-accounts keys create gke-connect.json \</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">  --iam-account=<span class="variable">$&#123;SA&#125;</span>@<span class="variable">$&#123;GOOGLE_CLOUD_PROJECT&#125;</span>.iam.gserviceaccount.com \</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">  --project=<span class="variable">$&#123;GOOGLE_CLOUD_PROJECT&#125;</span></span></pre></td></tr></table></figure>

<p><img src="Untitled8.png" alt="Untitled8.png"></p>
<blockquote>
<p>æ¥ä¸‹ä¾†çš„æ­¥é©Ÿï¼Œæ˜¯ç‚ºç”Ÿæˆ Service Account for Kubernetesï¼Œå› æ­¤æœƒéœ€è¦ä½¿ç”¨$kubectl create sa æŒ‡ä»¤ä¾†å®Œæˆ</p>
</blockquote>
<h3 id="step3-ç”Ÿæˆ-Service-Account-for-kubernetes-KSA"><a href="#step3-ç”Ÿæˆ-Service-Account-for-kubernetes-KSA" class="headerlink" title="step3. ç”Ÿæˆ Service Account for kubernetes (KSA)"></a>step3. ç”Ÿæˆ Service Account for kubernetes (KSA)</h3><ul>
<li>å»ºç«‹ä¸€å€‹service account(sa)ï¼Œåç‚ºgke-admin</li>
<li>é€éç¶å®šçš„å‹•ä½œ<code>$kubectl clusterrolebinding</code>ï¼Œå°‡gke-admin ç¶çµ¦cluster-adminé€™å€‹æœ€å¤§çš„k8s role æ¬Šé™</li>
<li>æ“·å–service accountå…§å®¹ï¼Œè¼¸å‡ºyamlæ ¼å¼ï¼Œå†é€ébases64 -dè§£ç¢¼ï¼Œæœ€çµ‚å–å¾—TOKEN</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#1 create SA &amp; clusterrolebinding</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">kubectl create sa gke-admin</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">kubectl create clusterrolebinding gke-admin \</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">  --clusterrole=cluster-admin \</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">  --serviceaccount=default:gke-admin</span></pre></td></tr></table></figure>

<p>åŸ·è¡Œç•«é¢: <a href="http://clusterrolebinding.rbac.authorization.k8s.io/gke-admin" target="_blank" rel="noopener">clusterrolebinding.rbac.authorization.k8s.io/gke-admin</a> created</p>
<p>é¡¯ç¤ºç¶å®šé—œç³»å·²å»ºç«‹</p>
<p><img src="Untitled9.png" alt="Untitled9.png"></p>
<h3 id="step4-å¾©åˆ¶TOKEN"><a href="#step4-å¾©åˆ¶TOKEN" class="headerlink" title="step4. å¾©åˆ¶TOKEN"></a>step4. å¾©åˆ¶TOKEN</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">#1 Generate TOKEN code</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">SECRET_NAME=$(kubectl get sa gke-admin -oyaml | grep token | awk <span class="string">'&#123;print $3&#125;'</span>)</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">kubectl get secret <span class="variable">$SECRET_NAME</span> -ojsonpath=<span class="string">'&#123;.data.token&#125;'</span> | base64 -d</span></pre></td></tr></table></figure>

<p>åŸ·è¡Œ#2 ç•«é¢</p>
<p><img src="Untitled10.png" alt="Untitled10.png"></p>
<blockquote>
<p>ğŸ’¡$base64 -d, -D åƒæ•¸å•é¡Œ<br>å¯èƒ½æœƒå› ä¸åŒOSç‰ˆèˆ‡base packageå·®ç•°è€Œæœ‰æ‰€ä¸åŒ</p>
</blockquote>
<h1 id="â–Œ3-Kubernetesèˆ‡Anthosæ•´åˆ"><a href="#â–Œ3-Kubernetesèˆ‡Anthosæ•´åˆ" class="headerlink" title="â–Œ3. Kubernetesèˆ‡Anthosæ•´åˆ"></a>â–Œ3. Kubernetesèˆ‡Anthosæ•´åˆ</h1><p>ä¸Šè¿°å¤§æ­¥é©Ÿæ˜¯åœ–ä¸­ On-prem Data Centeræº–å‚™ï¼Œæˆ‘å€‘ç”¨kindåšä¸€å€‹æ¨¡æ“¬ï¼Œæ¥ä¸‹ä¾†è¦å»ºç«‹ç´…æ¡†å…§çš„é€£ç·š</p>
<ul>
<li>é€égke-connect.json google service(GSA)ï¼Œshellçš„æ“æ§å¯ä»¥è·Ÿå¤–éƒ¨api endpointæºé€šï¼Œå¹«æˆ‘å€‘å®‰è£agnetï¼Œä¸¦ä¸”å¯¦è¡Œè¨»å†Šçš„è¡Œç‚º</li>
<li>å¦å¤–ï¼Œä½ å¯èƒ½æœƒå¥½å¥‡ç‚ºä»€éº¼Anthosï¼ŒçŸ¥é“æˆ‘K8sçš„å…§å®¹å‘¢ï¼Œé‚£æ˜¯å› ç‚ºæœ‰contextè³‡è¨Šä¾›<code>$gcloud hub memberships register</code></li>
<li>è©³ç´°kubeconfigèˆ‡contextçš„é—œç³»å¯ä»¥åƒè€ƒ[4]èªªæ˜</li>
</ul>
<p><img src="Untitled11.png" alt="Untitled11.png"></p>
<h3 id="step1-è¨»å†Šè‡³Anthos"><a href="#step1-è¨»å†Šè‡³Anthos" class="headerlink" title="step1. è¨»å†Šè‡³Anthos"></a>step1. è¨»å†Šè‡³Anthos</h3><p>gcloud hub memberships register å°‡æœƒè¨»å†Šè‡³Anthosï¼Œè€ŒGKE Console æœƒé¡¯ç¤ºä¸€å€‹æ–°çš„K8sï¼Œå…¶ä¸­åƒè€ƒ</p>
<ul>
<li><code>--context=kind-kind</code>ï¼šæ˜¯.kube/configä¸­åç‚ºkind-kind cluster</li>
<li><code>--kubeconfig=$HOME/.kube/config</code> : æ˜¯å‘ŠçŸ¥æˆ‘çš„kubeconfigæª”åœ¨é‚£å…’ï¼Œè®“ç¨‹å¼å»è­˜åˆ¥æ­£ç¢ºçš„cluster</li>
<li><code>--service-account-key-file=gke-connect.json</code>ï¼šå‘ŠçŸ¥æˆ‘æœ¬æ©Ÿè¦æºé€šAnthos APIæ™‚ä½¿ç”¨çš„key</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">gcloud container hub memberships register on-prem \</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">   --context=kind-kind \</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">   --kubeconfig=<span class="variable">$HOME</span>/.kube/config \</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">   --service-account-key-file=gke-connect.json</span></pre></td></tr></table></figure>

<p>åŸ·è¡Œåƒ…3~5ç§’å°±å®Œæˆ</p>
<p><img src="Untitled12.png" alt="Untitled12.png"></p>
<h3 id="step2-GKE-Console-é¡¯ç¤ºæ–°çš„K8s"><a href="#step2-GKE-Console-é¡¯ç¤ºæ–°çš„K8s" class="headerlink" title="step2. GKE Console é¡¯ç¤ºæ–°çš„K8s"></a>step2. GKE Console é¡¯ç¤ºæ–°çš„K8s</h3><ul>
<li>ç„¶å¾Œè«‹è‡³GKE Console</li>
<li>æ–°çš„K8s åç‚ºon-premï¼Œä¹Ÿå°±æ˜¯æˆ‘å€‘å‰›å‰›registerçš„åå­—on-prem</li>
</ul>
<p><img src="Untitled13.png" alt="Untitled13.png"></p>
<h3 id="step3-è¼¸å…¥TOKEN"><a href="#step3-è¼¸å…¥TOKEN" class="headerlink" title="step3. è¼¸å…¥TOKEN"></a>step3. è¼¸å…¥TOKEN</h3><ul>
<li>ä¸Šé¢æ­¥é©Ÿç”¢å‡ºçš„tokenï¼Œä¸¦è²¼å…¥GKE Login</li>
</ul>
<p><img src="Untitled14.png" alt="Untitled14.png"></p>
<p>GKE Console: Log in to clusterç•«é¢ä½ç½®</p>
<ul>
<li>å°‡ä»¥ä¸ŠåŸ·è¡ŒæŒ‡ä»¤æœ€å¾Œé¡¯ç¤ºçš„ Token è¤‡è£½æ–¼ Cloud Console GKE é é¢ç™»å…¥è¨»å†Šçš„ Clusterã€‚</li>
</ul>
<p><img src="Untitled15.png" alt="Untitled15.png"></p>
<p>è²¼å…¥TOKEN</p>
<p><img src="Untitled16.png" alt="Untitled16.png"></p>
<h3 id="step4-æˆåŠŸè¨»å†Šon-prem"><a href="#step4-æˆåŠŸè¨»å†Šon-prem" class="headerlink" title="step4. æˆåŠŸè¨»å†Šon-prem"></a>step4. æˆåŠŸè¨»å†Šon-prem</h3><ul>
<li>GKE consoleå¯ä»¥çœ‹åˆ°ç¶ å­—çš„å‹¾ï¼Œä»£è¡¨ä½ å¯ä»¥ç”¨çµ±ä¸€ä»‹é¢ä¾†ç®¡ç†Attached K8s</li>
<li>ç•¶ç„¶ä½ å¯ä»¥ï¼Œé€éConsole çš„workload, serviceç­‰åŠŸèƒ½ï¼Œä¾†é”åˆ°å¤šé›²æ··åˆçµ±ä¸€ç®¡ç†çš„ç’°å¢ƒ</li>
</ul>
<p><img src="Untitled17.png" alt="Untitled17.png"></p>
<hr>
<h1 id="çµè«–"><a href="#çµè«–" class="headerlink" title="çµè«–"></a>çµè«–</h1><p>åœ¨æœ¬æ¬¡çš„å¯¦ä½œï¼Œå¤§å®¶éƒ½å¯èƒ½å¾ˆæ¸…æ¥šAnthosæ˜¯é€éGKE-Hub, GKE-Connectï¼Œè®“å½¼æ­¤ä¸ç›¸å¹²çš„ç’°å¢ƒK8sä»‹æ¥åœ¨ä¸€èµ·ï¼ŒAnthos ä¸åƒ…å¯ä»¥ç®¡ç†è‡ªå·²çš„GKE, ä¹ŸåŒ…å«AWS, Azure, OpenShiftç­‰å¤–éƒ¨çš„K8sï¼Œå¦‚åŒæˆ‘å€‘çš„å¯¦é©—kind å¤–éƒ¨çš„clusterï¼Œéƒ½èƒ½ä¸€ä½µé›†ä¸­ç®¡ç†ã€‚</p>
<h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p>[1] <a href="https://kind.sigs.k8s.io/docs/user/quick-start/" target="_blank" rel="noopener">https://kind.sigs.k8s.io/docs/user/quick-start/</a></p>
<p>[2] <a href="https://kubernetes.io/docs/tasks/tools/" target="_blank" rel="noopener">https://kubernetes.io/docs/tasks/tools/</a></p>
<p>[3] <a href="https://cloud.google.com/sdk/gcloud/reference/auth/login" target="_blank" rel="noopener">https://cloud.google.com/sdk/gcloud/reference/auth/login</a></p>
<p>[4] <a href="https://joehuang-pop.github.io/2020/10/04/K8S-kubectx%E5%A4%9A%E5%8F%A2%E9%9B%86%E9%96%93%E5%88%87%E6%8F%9B%E8%87%AA%E5%A6%82-Switching-between-K8s-contexts/">https://joehuang-pop.github.io/2020/10/04/K8S-kubectxå¤šå¢é›†é–“åˆ‡æ›è‡ªå¦‚-Switching-between-K8s-contexts/</a></p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Anthos/" rel="tag"># Anthos</a>
          
            <a href="/tags/Service-Account/" rel="tag"># Service Account</a>
          
            <a href="/tags/Kubernetes/" rel="tag"># Kubernetes</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2021/04/03/EKS-%E6%96%BCAWS%E5%BB%BA%E7%AB%8BKubernetes-%E5%8E%9F%E7%94%9F%E5%8F%A2%E9%9B%86-Building-Amazon-EKS/" rel="next" title="[EKS] æ–¼AWSå»ºç«‹Kubernetes åŸç”Ÿå¢é›† | Building Amazon EKS">
                <i class="fa fa-chevron-left"></i> [EKS] æ–¼AWSå»ºç«‹Kubernetes åŸç”Ÿå¢é›† | Building Amazon EKS
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2021/05/17/Anthos-%E7%A5%9E%E5%A5%87%E5%82%91%E5%85%8B%E5%85%A8%E8%87%AA%E5%8B%95%E5%8C%96%E8%BD%89VM-%E8%87%B3Container-Migrate-for-Anthos/" rel="prev" title="[Anthos] ç¥å¥‡å‚‘å…‹å…¨è‡ªå‹•åŒ–è½‰VM è‡³Container | Migrate for Anthos">
                [Anthos] ç¥å¥‡å‚‘å…‹å…¨è‡ªå‹•åŒ–è½‰VM è‡³Container | Migrate for Anthos <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Joe Huang</p>
              <p class="site-description motion-element" itemprop="description">é›²ç«¯æ¶æ§‹å¸«ï¼Œå¹´è¼•çš„è»€æ®¼è£è‘—è€éˆé­‚ï¼Œå–œæ­¡é…è‘—éŸ³æ¨‚é–±è®€ï¼Œç”Ÿæ´»ä¸èƒ½æ²’æœ‰æ€è€ƒå’ŒéŠè•© |                  Young body with sentimental and old soul. Canâ€™t live without reading and music, and believe that life is full of thinking and warding.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/%7C%7C%20archive">
              
                  <span class="site-state-item-count">48</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">10</span>
                  <span class="site-state-item-name">categories</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">93</span>
                  <span class="site-state-item-name">tags</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#å‰è¨€"><span class="nav-number">1.</span> <span class="nav-text">å‰è¨€</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#æ­¥é©Ÿï¼š"><span class="nav-number">2.</span> <span class="nav-text">æ­¥é©Ÿï¼š</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#â–Œ1-æº–å‚™ä¸€å¥—Kubernetes-kind"><span class="nav-number">3.</span> <span class="nav-text">â–Œ1. æº–å‚™ä¸€å¥—Kubernetes: kind</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#å‰ç½®éœ€æ±‚"><span class="nav-number">3.0.1.</span> <span class="nav-text">å‰ç½®éœ€æ±‚</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#step1-Google-OAuth-for-gcloud-auth-login"><span class="nav-number">3.0.2.</span> <span class="nav-text">step1. Google OAuth for gcloud auth login</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#step2-CentOS-install-kind"><span class="nav-number">3.0.3.</span> <span class="nav-text">step2. CentOS install kind</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#step3-æº–å‚™clusterè¨­å®šæª”-kind-yaml"><span class="nav-number">3.0.4.</span> <span class="nav-text">step3. æº–å‚™clusterè¨­å®šæª”: kind.yaml</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#step3-é©—è­‰K8s"><span class="nav-number">3.0.5.</span> <span class="nav-text">step3. é©—è­‰K8s</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#â–Œ2-é‡å°-GCP-Kubernetes-å„åˆ¥ç”Ÿæˆ-Service-Account"><span class="nav-number">4.</span> <span class="nav-text">â–Œ2. é‡å° GCP, Kubernetes å„åˆ¥ç”Ÿæˆ Service Account</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#step1-é‡å°gke-connect-å•Ÿç”¨ä¸€æŠŠservice-account-SA"><span class="nav-number">4.0.1.</span> <span class="nav-text">step1. é‡å°gke-connect å•Ÿç”¨ä¸€æŠŠservice account (SA)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#step2-æŠŠGSA-ä¸‹è¼‰è‡³æœ¬æ©Ÿç‚º-json"><span class="nav-number">4.0.2.</span> <span class="nav-text">step2. æŠŠGSA ä¸‹è¼‰è‡³æœ¬æ©Ÿç‚º.json</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#step3-ç”Ÿæˆ-Service-Account-for-kubernetes-KSA"><span class="nav-number">4.0.3.</span> <span class="nav-text">step3. ç”Ÿæˆ Service Account for kubernetes (KSA)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#step4-å¾©åˆ¶TOKEN"><span class="nav-number">4.0.4.</span> <span class="nav-text">step4. å¾©åˆ¶TOKEN</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#â–Œ3-Kubernetesèˆ‡Anthosæ•´åˆ"><span class="nav-number">5.</span> <span class="nav-text">â–Œ3. Kubernetesèˆ‡Anthosæ•´åˆ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#step1-è¨»å†Šè‡³Anthos"><span class="nav-number">5.0.1.</span> <span class="nav-text">step1. è¨»å†Šè‡³Anthos</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#step2-GKE-Console-é¡¯ç¤ºæ–°çš„K8s"><span class="nav-number">5.0.2.</span> <span class="nav-text">step2. GKE Console é¡¯ç¤ºæ–°çš„K8s</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#step3-è¼¸å…¥TOKEN"><span class="nav-number">5.0.3.</span> <span class="nav-text">step3. è¼¸å…¥TOKEN</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#step4-æˆåŠŸè¨»å†Šon-prem"><span class="nav-number">5.0.4.</span> <span class="nav-text">step4. æˆåŠŸè¨»å†Šon-prem</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#çµè«–"><span class="nav-number">6.</span> <span class="nav-text">çµè«–</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-number">7.</span> <span class="nav-text">Reference</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Joe Huang</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Muse</a> v5.1.4</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
      
    </span>
  

  
    <span class="site-pv">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
      
    </span>
  
</div>








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
